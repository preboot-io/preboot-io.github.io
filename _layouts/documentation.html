---
layout: default
---
<div class="documentation-container">
  <aside class="sidebar">
    <div class="sidebar-inner">
      <div class="version-selector">
        <label for="version-select">Version:</label>
        <select id="version-select" onchange="switchVersion(this.value)">
          {% for version in site.preboot.versions %}
          <option value="{{ version.name }}" {% if page.version == version.name %}selected{% elsif page.version == nil and version.default %}selected{% endif %}>{{ version.label }}</option>
          {% endfor %}
        </select>
        <div class="current-version">
          <span class="version-badge">PreBoot {{ site.preboot.version }}</span>
        </div>
      </div>
      <div class="search-box">
        <input type="text" id="doc-search" placeholder="Search docs...">
      </div>
      <nav class="docs-nav">
        {% assign nav_data = site.data.navigation %}
        {% if page.version %}
          {% assign nav_file = 'navigation-' | append: page.version %}
          {% assign nav_data = site.data[nav_file] %}
        {% endif %}
        {% for section in nav_data.docs %}
          <div class="nav-section" data-section="{{ section.section }}">
            <h3 class="nav-section-title">{{ section.title }}</h3>
            {% if section.description %}
              <p class="nav-section-description">{{ section.description }}</p>
            {% endif %}
            {% if section.subsections %}
              {% for subsection in section.subsections %}
                <div class="nav-subsection">
                  <h4 class="nav-subsection-title">{{ subsection.title }}</h4>
                  {% if subsection.description %}
                    <p class="nav-subsection-description">{{ subsection.description }}</p>
                  {% endif %}
                  <ul class="nav-list">
                    {% for item in subsection.children %}
                      <li class="nav-item">
                        <a href="{{ item.url }}" 
                           class="nav-link {% if page.url == item.url %}active{% endif %}">
                          {{ item.title }}
                        </a>
                      </li>
                    {% endfor %}
                  </ul>
                </div>
              {% endfor %}
            {% else %}
              <ul class="nav-list">
                {% for item in section.children %}
                  <li class="nav-item">
                    <a href="{{ item.url }}" 
                       class="nav-link {% if page.url == item.url %}active{% endif %}">
                      {{ item.title }}
                    </a>
                  </li>
                {% endfor %}
              </ul>
            {% endif %}
          </div>
        {% endfor %}
      </nav>
    </div>
  </aside>
  <main class="content" {% if page.section %}data-section="{{ page.section }}"{% endif %}>
    {% if page.title == "PreBoot Documentation" %}
    <div class="documentation-banner">
      <h1>PreBoot Documentation</h1>
      <p>A comprehensive guide to building SaaS applications with PreBoot</p>
    </div>
    {% endif %}
    <div class="content-inner">
      {% if page.title != "PreBoot Documentation" %}
      <header class="article-header">
        {% if page.section %}
        <div class="section-badge {{ page.section }}">
          {% case page.section %}
            {% when 'getting-started' %}üöÄ Getting Started
            {% when 'backend' %}‚öôÔ∏è Backend
            {% when 'frontend' %}üé® Frontend
            {% when 'reference-app' %}üì± Reference App
            {% else %}{{ page.section }}
          {% endcase %}
        </div>
        {% endif %}
        <h1>{{ page.title }}</h1>
        {% if page.subtitle %}<p class="subtitle">{{ page.subtitle }}</p>{% endif %}
      </header>
      {% endif %}
      {% if page.toc != false %}
      <div class="table-of-contents" id="toc">
        <h3>On this page</h3>
        <!-- JavaScript will fill this -->
      </div>
      {% endif %}
      <div class="article-content">
        {{ content }}
      </div>
    </div>
  </main>
</div>
<script>
  // Generate Table of Contents
  document.addEventListener('DOMContentLoaded', function () {
    const tocContainer = document.getElementById('toc');
    if (!tocContainer) return;
    const headings = document.querySelectorAll('.article-content h2, .article-content h3');
    if (headings.length === 0) {
      tocContainer.style.display = 'none';
      return;
    }
    const tocList = document.createElement('ul');
    headings.forEach(function (heading, index) {
      // Add ID to the heading if it doesn't have one
      if (!heading.id) {
        heading.id = 'heading-' + index;
      }
      const listItem = document.createElement('li');
      listItem.classList.add(heading.tagName.toLowerCase());
      const link = document.createElement('a');
      link.href = '#' + heading.id;
      link.textContent = heading.textContent;
      listItem.appendChild(link);
      tocList.appendChild(listItem);
    });
    tocContainer.appendChild(tocList);
  });
  // Simple search
  document.addEventListener('DOMContentLoaded', function () {
    const searchInput = document.getElementById('doc-search');
    if (!searchInput) return;
    searchInput.addEventListener('input', function () {
      const query = this.value.toLowerCase();
      const links = document.querySelectorAll('.docs-nav .nav-link');
      const sections = document.querySelectorAll('.docs-nav .nav-section');
      
      links.forEach(function (link) {
        const text = link.textContent.toLowerCase();
        const listItem = link.parentElement;
        const section = link.closest('.nav-section');
        
        if (query === '' || text.includes(query)) {
          listItem.style.display = '';
          // Show section if at least one item matches
          if (section) {
            section.style.display = '';
          }
        } else {
          listItem.style.display = 'none';
        }
      });
      
      // Hide sections with no visible items
      sections.forEach(function(section) {
        const visibleItems = section.querySelectorAll('.nav-item:not([style*="display: none"])');
        if (visibleItems.length === 0 && query !== '') {
          section.style.display = 'none';
        }
      });
    });
  });
</script>
<script>
  // Add class to body for documentation-specific styles
  document.addEventListener('DOMContentLoaded', function() {
    document.body.classList.add('documentation-page');
  });

  // Preserve sidebar scroll position across navigation
  document.addEventListener('DOMContentLoaded', function() {
    const sidebar = document.querySelector('.sidebar');
    const navLinks = document.querySelectorAll('.docs-nav .nav-link');
    
    if (!sidebar) return;

    // Restore scroll position on page load
    const savedScrollTop = sessionStorage.getItem('docs-sidebar-scroll');
    if (savedScrollTop) {
      sidebar.scrollTop = parseInt(savedScrollTop, 10);
    }

    // Save scroll position when clicking navigation links
    navLinks.forEach(function(link) {
      link.addEventListener('click', function() {
        sessionStorage.setItem('docs-sidebar-scroll', sidebar.scrollTop);
      });
    });

    // Also save on scroll to handle any manual scrolling
    let scrollTimeout;
    sidebar.addEventListener('scroll', function() {
      clearTimeout(scrollTimeout);
      scrollTimeout = setTimeout(function() {
        sessionStorage.setItem('docs-sidebar-scroll', sidebar.scrollTop);
      }, 100);
    });
  });

  // Version switching functionality
  function switchVersion(version) {
    const currentPath = window.location.pathname;
    let newPath;
    
    if (version === 'latest') {
      // For 'latest', use current structure (no version in path)
      if (currentPath.includes('/docs/v')) {
        // Remove version from path for latest
        newPath = currentPath.replace(/\/docs\/v[\d.]+\//, '/docs/');
      } else {
        // Already on latest structure
        newPath = currentPath;
      }
    } else {
      // For specific versions, add version to path
      if (currentPath.includes('/docs/v')) {
        // Replace existing version
        newPath = currentPath.replace(/\/docs\/v[\d.]+\//, `/docs/${version}/`);
      } else if (currentPath.startsWith('/docs/')) {
        // Add version to current path
        newPath = currentPath.replace('/docs/', `/docs/${version}/`);
      } else {
        // Default to docs root for the version
        newPath = `/docs/${version}/`;
      }
    }
    
    window.location.href = newPath;
  }

  // Initialize Mermaid diagrams
  document.addEventListener('DOMContentLoaded', function() {
    if (typeof mermaid !== 'undefined') {
      mermaid.initialize({
        startOnLoad: false,
        theme: 'base',
        themeVariables: {
          // Professional color scheme
          primaryColor: '#f8fafc',
          primaryTextColor: '#1e293b',
          primaryBorderColor: '#3b82f6',
          lineColor: '#64748b',
          secondaryColor: '#e2e8f0',
          tertiaryColor: '#f1f5f9',
          
          // Subgraph styling
          clusterBkg: '#f8fafc',
          clusterBorder: '#3b82f6',
          
          // Node styling
          nodeBorder: '#3b82f6',
          mainBkg: '#ffffff',
          secondBkg: '#f1f5f9',
          tertiaryBkg: '#e2e8f0',
          
          // Font styling
          fontFamily: 'Inter, -apple-system, BlinkMacSystemFont, sans-serif',
          fontSize: '14px'
        },
        flowchart: {
          useMaxWidth: true,
          htmlLabels: true,
          curve: 'basis',
          padding: 20
        },
        sequence: {
          diagramMarginX: 50,
          diagramMarginY: 10,
          boxTextMargin: 5,
          noteMargin: 10,
          messageMargin: 35
        }
      });
      
      // Find and convert mermaid code blocks
      const mermaidBlocks = document.querySelectorAll('pre code.language-mermaid');
      mermaidBlocks.forEach(function(block, index) {
        const mermaidCode = block.textContent;
        const mermaidDiv = document.createElement('div');
        mermaidDiv.className = 'mermaid';
        mermaidDiv.textContent = mermaidCode;
        mermaidDiv.id = 'mermaid-' + index;
        
        // Replace the code block with the mermaid div
        block.parentElement.parentElement.replaceChild(mermaidDiv, block.parentElement);
      });
      
      // Render all mermaid diagrams
      mermaid.init();
    }
  });
</script>
<!-- Mermaid.js for diagrams -->
<script src="https://cdn.jsdelivr.net/npm/mermaid@9.4.3/dist/mermaid.min.js"></script>